{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Sayjan Desktop\\\\Projects\\\\DataFunnel\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Container, Grid, Typography } from \"@mui/material\";\nimport DChart from \"./components/DChart\";\nimport DTable from \"./components/DTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [data, setData] = useState(null);\n\n  //fetch the data from the server\n  useEffect(() => {\n    fetch(\"http://localhost:3000/api/data\") //url set on the backend\n    .then(res => res.json()).then(setData).catch(err => console.error(\"Error fetching data:\", err));\n  }, []); //using [] so that it fetches data everytime we call for the api\n  //if data not fetched yer disply \"Loading..\"\n  if (!data) return /*#__PURE__*/_jsxDEV(Typography, {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 21\n  }, this);\n\n  //calculate the table data for count\n  const CountTable = data =>\n  //map the data in the correct format\n  data.map((curr, index) => {\n    var _nxt$count;\n    const nxt = data[index + 1];\n    const moved = (_nxt$count = nxt === null || nxt === void 0 ? void 0 : nxt.count) !== null && _nxt$count !== void 0 ? _nxt$count : curr.label === \"Won\" ? curr.count : 0;\n    //ones who couldn't move to next stage lost\n    const lost = curr.count - moved;\n    //win rate is the percentage of last count/ current count\n    const winRate = (data[data.length - 1].count / curr.count * 100).toFixed(0);\n    const diffRate = curr.diffRate;\n    return {\n      stage: curr.label,\n      cameToStage: curr.count,\n      lost,\n      moved,\n      winRate: `${winRate}%`,\n      diffRate\n    };\n  });\n\n  //calculate the table data for acv\n  const AcvTable = data =>\n  //map the data in the correct format\n  data.map((curr, index) => {\n    var _nxt$acv;\n    const nxt = data[index + 1];\n    const moved = (_nxt$acv = nxt === null || nxt === void 0 ? void 0 : nxt.acv) !== null && _nxt$acv !== void 0 ? _nxt$acv : curr.label === \"Won\" ? curr.acv : 0;\n    const lost = curr.acv - moved; //ones who couldn't move to next stage lost\n    //win rate is the percentage of last avc/ current acv\n    const winRate = (data[data.length - 1].acv / curr.acv * 100).toFixed(0);\n    const diffacvRate = curr.diffacvRate;\n    return {\n      stage: curr.label,\n      cameToStage: curr.acv,\n      lost,\n      moved,\n      winRate: `${winRate}%`,\n      diffacvRate\n    };\n  });\n  const tableDataCount = CountTable(data);\n  const tableDataAcv = AcvTable(data);\n  const totalLostCount = tableDataCount.reduce((sum, row) => sum + (row.stage === \"Won\" ? 0 : row.lost), 0);\n  const totalLostAcv = tableDataAcv.reduce((sum, row) => sum + (row.stage === \"Won\" ? 0 : row.lost), 0);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: {\n      padding: 10,\n      marginTop: 30\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 4,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        size: {\n          xs: 12,\n          sm: 6\n        },\n        children: [\" \", /*#__PURE__*/_jsxDEV(DChart, {\n          data: data,\n          type: \"count\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        size: {\n          xs: 12,\n          sm: 6\n        },\n        children: /*#__PURE__*/_jsxDEV(DChart, {\n          data: data,\n          type: \"acv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        size: {\n          xs: 12,\n          sm: 6\n        },\n        children: /*#__PURE__*/_jsxDEV(DTable, {\n          data: tableDataCount,\n          title: \"Funnel Table (Count)\",\n          totalLost: totalLostCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        size: {\n          xs: 12,\n          sm: 6\n        },\n        children: /*#__PURE__*/_jsxDEV(DTable, {\n          data: tableDataAcv,\n          title: \"Funnel Table (ACV)\",\n          totalLost: totalLostAcv\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Container","Grid","Typography","DChart","DTable","jsxDEV","_jsxDEV","App","_s","data","setData","fetch","then","res","json","catch","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","CountTable","map","curr","index","_nxt$count","nxt","moved","count","label","lost","winRate","length","toFixed","diffRate","stage","cameToStage","AcvTable","_nxt$acv","acv","diffacvRate","tableDataCount","tableDataAcv","totalLostCount","reduce","sum","row","totalLostAcv","style","padding","marginTop","container","spacing","size","xs","sm","type","title","totalLost","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Sayjan Desktop/Projects/DataFunnel/frontend/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Container, Grid, Typography } from \"@mui/material\";\nimport DChart from \"./components/DChart\";\nimport DTable from \"./components/DTable\";\n\nfunction App() {\n  const [data, setData] = useState(null);\n\n  //fetch the data from the server\n  useEffect(() => {\n    fetch(\"http://localhost:3000/api/data\") //url set on the backend\n      .then((res) => res.json())\n      .then(setData)\n      .catch((err) => console.error(\"Error fetching data:\", err));\n  }, []); //using [] so that it fetches data everytime we call for the api\n  //if data not fetched yer disply \"Loading..\"\n  if (!data) return <Typography>Loading...</Typography>;\n\n  //calculate the table data for count\n  const CountTable = (data) =>\n    //map the data in the correct format\n    data.map((curr, index) => {\n      const nxt = data[index + 1];\n      const moved = nxt?.count ?? (curr.label === \"Won\" ? curr.count : 0);\n      //ones who couldn't move to next stage lost\n      const lost = curr.count - moved;\n      //win rate is the percentage of last count/ current count\n      const winRate = (\n        (data[data.length - 1].count / curr.count) *\n        100\n      ).toFixed(0);\n      const diffRate = curr.diffRate;\n      return {\n        stage: curr.label,\n        cameToStage: curr.count,\n        lost,\n        moved,\n        winRate: `${winRate}%`,\n        diffRate,\n      };\n    });\n\n  //calculate the table data for acv\n  const AcvTable = (data) =>\n    //map the data in the correct format\n    data.map((curr, index) => {\n      const nxt = data[index + 1];\n      const moved = nxt?.acv ?? (curr.label === \"Won\" ? curr.acv : 0);\n\n      const lost = curr.acv - moved; //ones who couldn't move to next stage lost\n      //win rate is the percentage of last avc/ current acv\n      const winRate = ((data[data.length - 1].acv / curr.acv) * 100).toFixed(0);\n      const diffacvRate = curr.diffacvRate;\n\n      return {\n        stage: curr.label,\n        cameToStage: curr.acv,\n        lost,\n        moved,\n        winRate: `${winRate}%`,\n        diffacvRate,\n      };\n    });\n\n  const tableDataCount = CountTable(data);\n  const tableDataAcv = AcvTable(data);\n\n  const totalLostCount = tableDataCount.reduce(\n    (sum, row) => sum + (row.stage === \"Won\" ? 0 : row.lost),\n    0\n  );\n\n  const totalLostAcv = tableDataAcv.reduce(\n    (sum, row) => sum + (row.stage === \"Won\" ? 0 : row.lost),\n    0\n  );\n\n  return (\n    <Container style={{ padding: 10, marginTop: 30 }}>\n      <Grid container spacing={4}>\n        <Grid size={{ xs: 12, sm: 6 }}>\n          {\" \"}\n          {/* xs,sm used for making it responsive, 12 stands for full width and 6 for half, meaning it would take full width available if the screen size is less than 600 otherwise it will take half the screen. */}\n          <DChart data={data} type=\"count\" />\n        </Grid>\n        <Grid size={{ xs: 12, sm: 6 }}>\n          <DChart data={data} type=\"acv\" />\n        </Grid>\n        <Grid size={{ xs: 12, sm: 6 }}>\n          <DTable\n            data={tableDataCount}\n            title=\"Funnel Table (Count)\"\n            totalLost={totalLostCount}\n          />\n        </Grid>\n        <Grid size={{ xs: 12, sm: 6 }}>\n          <DTable\n            data={tableDataAcv}\n            title=\"Funnel Table (ACV)\"\n            totalLost={totalLostAcv}\n          />\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}