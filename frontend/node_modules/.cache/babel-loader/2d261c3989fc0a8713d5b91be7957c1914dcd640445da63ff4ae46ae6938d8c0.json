{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Sayjan Desktop\\\\Projects\\\\DataFunnel\\\\frontend\\\\src\\\\components\\\\FunnelChart.js\",\n  _s = $RefreshSig$();\nimport * as d3 from \"d3\";\nimport { useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FunnelChart = ({\n  data\n}) => {\n  _s();\n  const ref = useRef();\n  useEffect(() => {\n    if (!data || !ref.current) return;\n    const width = ref.current.clientWidth;\n    const height = 400;\n    const svg = d3.select(ref.current).html(\"\") // clear previous\n    .append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", height);\n    const maxVal = d3.max(data, d => d.value);\n    const funnelWidth = width * 0.9;\n    const sectionHeight = height / data.length;\n    const color = d3.scaleOrdinal(d3.schemeBlues[data.length + 1]);\n    data.forEach((d, i) => {\n      var _data;\n      const topWidth = (((_data = data[i - 1]) === null || _data === void 0 ? void 0 : _data.value) || maxVal) / maxVal * funnelWidth;\n      const bottomWidth = d.value / maxVal * funnelWidth;\n      const x = (width - topWidth) / 2;\n      const nextX = (width - bottomWidth) / 2;\n      const y = i * sectionHeight;\n      const points = [[x, y], [x + topWidth, y], [nextX + bottomWidth, y + sectionHeight], [nextX, y + sectionHeight]];\n      svg.append(\"polygon\").data([d]).attr(\"points\", points.map(p => p.join(\",\")).join(\" \")).attr(\"fill\", color(i)).attr(\"opacity\", 0).transition().duration(800).delay(i * 200).attr(\"opacity\", 1);\n    });\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    style: {\n      width: \"100%\",\n      height: \"400px\",\n      marginTop: \"2rem\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(FunnelChart, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = FunnelChart;\nexport default FunnelChart;\nvar _c;\n$RefreshReg$(_c, \"FunnelChart\");","map":{"version":3,"names":["d3","useEffect","useRef","jsxDEV","_jsxDEV","FunnelChart","data","_s","ref","current","width","clientWidth","height","svg","select","html","append","attr","maxVal","max","d","value","funnelWidth","sectionHeight","length","color","scaleOrdinal","schemeBlues","forEach","i","_data","topWidth","bottomWidth","x","nextX","y","points","map","p","join","transition","duration","delay","style","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Sayjan Desktop/Projects/DataFunnel/frontend/src/components/FunnelChart.js"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nconst FunnelChart = ({ data }) => {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!data || !ref.current) return;\r\n\r\n    const width = ref.current.clientWidth;\r\n    const height = 400;\r\n    const svg = d3\r\n      .select(ref.current)\r\n      .html(\"\") // clear previous\r\n      .append(\"svg\")\r\n      .attr(\"width\", \"100%\")\r\n      .attr(\"height\", height);\r\n\r\n    const maxVal = d3.max(data, (d) => d.value);\r\n    const funnelWidth = width * 0.9;\r\n    const sectionHeight = height / data.length;\r\n\r\n    const color = d3.scaleOrdinal(d3.schemeBlues[data.length + 1]);\r\n\r\n    data.forEach((d, i) => {\r\n      const topWidth = ((data[i - 1]?.value || maxVal) / maxVal) * funnelWidth;\r\n      const bottomWidth = (d.value / maxVal) * funnelWidth;\r\n\r\n      const x = (width - topWidth) / 2;\r\n      const nextX = (width - bottomWidth) / 2;\r\n\r\n      const y = i * sectionHeight;\r\n\r\n      const points = [\r\n        [x, y],\r\n        [x + topWidth, y],\r\n        [nextX + bottomWidth, y + sectionHeight],\r\n        [nextX, y + sectionHeight],\r\n      ];\r\n\r\n      svg\r\n        .append(\"polygon\")\r\n        .data([d])\r\n        .attr(\"points\", points.map((p) => p.join(\",\")).join(\" \"))\r\n        .attr(\"fill\", color(i))\r\n        .attr(\"opacity\", 0)\r\n        .transition()\r\n        .duration(800)\r\n        .delay(i * 200)\r\n        .attr(\"opacity\", 1);\r\n    });\r\n  }, [data]);\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"400px\",\r\n        marginTop: \"2rem\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default FunnelChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}